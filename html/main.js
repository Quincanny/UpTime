const json = [{"2023-07-12": {"Python": {"08": 11, "09": 6, "10": 5, "13": 17, "16": 15, "17": 12, "19": 19}, "Windows Explorer": {"08": 5, "09": 2, "10": 32, "11": 27, "12": 8, "13": 8, "14": 15, "15": 27, "16": 100, "17": 20, "18": 27, "19": 47, "20": 31}, "Google Chrome": {"08": 692, "09": 3570, "10": 1159, "11": 508, "12": 1214, "13": 698, "14": 2643, "15": 2724, "16": 2252, "17": 937, "18": 407, "19": 1877, "20": 1605}, "Discord": {"09": 13, "11": 48, "12": 5, "13": 90, "14": 210, "15": 514, "16": 310, "17": 18, "18": 49, "19": 142, "20": 170}, "Application Frame Host": {"09": 5, "15": 102, "16": 32}, "OpenJDK Platform binary": {"10": 2358, "11": 2972, "12": 2344, "13": 1327, "14": 90, "16": 19, "17": 2488, "18": 2329, "19": 891, "20": 11}, "qBittorrent - A Bittorrent Client": {"11": 8}, "Search application": {"11": 8, "15": 2, "16": 285, "19": 11}, "OP Auto Clicker": {"11": 7, "16": 2}, "Spotify": {"13": 183, "14": 318, "15": 226, "16": 154, "17": 4, "19": 29, "20": 74}, "LockApp.exe": {"13": 286, "14": 144, "16": 238, "18": 333, "19": 2}, "Windows Shell Experience Host": {"14": 1, "15": 1, "16": 5}, "Task Manager": {"16": 12}, "Windows Command Processor": {"16": 22}, "Pick an app": {"16": 7}, "Notepad": {"16": 44, "17": 9, "19": 8}, "PyxelEdit.exe": {"16": 84}, "Steam Client WebHelper": {"20": 36}, "BloonsTD6.exe": {"20": 5}, "Easy Anti-Cheat Bootstrapper (EOS)": {"20": 28}, "BrawlhallaGame.exe": {"20": 1631}}}, {"2023-07-14": {"Python": {"06": 3, "07": 18, "11": 3, "19": 10, "20": 2, "21": 6}, "Hard Disk Sentinel": {"06": 2, "21": 1}, "Windows Explorer": {"06": 22, "07": 195, "08": 2, "09": 49, "10": 27, "11": 1, "13": 1, "14": 28, "15": 22, "16": 12, "17": 39, "18": 6, "19": 15, "20": 39, "21": 55}, "Discord": {"06": 463, "10": 5, "14": 198, "15": 861, "16": 65, "17": 575, "18": 40, "19": 70, "20": 693, "21": 113}, "Steam Client WebHelper": {"06": 8, "16": 1, "20": 1}, "Google Chrome": {"06": 711, "07": 2354, "08": 1170, "09": 564, "10": 524, "11": 73, "12": 84, "13": 1, "14": 144, "15": 384, "16": 122, "17": 362, "18": 144, "19": 95, "20": 41, "21": 1143}, "Windows Shell Experience Host": {"06": 34, "07": 17, "17": 1}, "Snipping Tool": {"06": 65, "15": 5}, "Spotify": {"06": 6, "07": 161, "10": 11, "13": 11, "14": 10, "16": 29, "17": 28, "21": 238}, "LockApp.exe": {"06": 291, "07": 289, "17": 395, "18": 538, "19": 1, "21": 117}, "OpenJDK Platform binary": {"07": 486, "08": 2387, "09": 2943, "10": 2994, "11": 1027, "12": 3510, "13": 3575, "14": 642, "15": 2259, "16": 425, "17": 11, "18": 1, "20": 6, "21": 2}, "Notepad": {"07": 1, "08": 2, "09": 5, "10": 8, "15": 1, "17": 6, "21": 83}, "Search application": {"07": 1, "09": 9}, "OP Auto Clicker": {"09": 2, "10": 1, "11": 2, "13": 6, "14": 1}, "BrawlhallaGame.exe": {"14": 2560, "16": 2893, "17": 549}, "Application Frame Host": {"14": 6, "17": 21}, "Easy Anti-Cheat Bootstrapper (EOS)": {"16": 40}, "Java(TM) Platform SE binary": {"17": 1584, "18": 1885, "20": 1633, "21": 1789}, "BloonsTD6.exe": {"19": 2491, "20": 1169}, "Peter's Equalizer APO Configuration Extension (Peace)": {"21": 11}, "WinRAR archiver": {"21": 1}, "Rainmeter desktop customization tool": {"21": 32}}}, {"2023-07-15": {"Google Chrome": {"06": 666, "07": 1434, "08": 1863, "09": 1049, "10": 3394, "11": 2267, "12": 824, "13": 562, "15": 1651, "16": 1787, "17": 2379, "18": 1026, "19": 414, "20": 82, "21": 95}, "Windows Explorer": {"06": 1, "07": 20, "08": 54, "09": 88, "10": 21, "11": 69, "12": 150, "13": 15, "15": 169, "16": 53, "17": 75, "18": 31, "19": 21, "20": 324, "21": 38}, "Python": {"06": 3, "07": 24, "08": 5, "11": 13, "15": 17, "19": 1}, "LockApp.exe": {"06": 292, "07": 3, "08": 365, "09": 1, "12": 527, "13": 41, "17": 74, "18": 568, "19": 4}, "Hard Disk Sentinel": {"07": 1, "12": 1, "13": 3}, "Spotify": {"07": 15, "09": 14, "10": 136, "11": 35, "13": 4, "15": 253, "16": 57, "17": 11, "19": 29, "20": 35, "21": 57}, "Visual Studio Code": {"07": 1271, "08": 539, "09": 23, "10": 1, "12": 1, "15": 197, "16": 1338, "17": 657, "18": 297}, "Steam Client WebHelper": {"07": 1, "12": 1, "13": 52, "15": 19, "18": 87, "20": 7, "21": 15}, "BloonsTD6.exe": {"07": 14}, "Search application": {"07": 1, "11": 7, "12": 6, "15": 25, "17": 1, "21": 5}, "Windows Shell Experience Host": {"07": 1, "08": 5, "12": 2, "17": 1}, "Internet Download Manager (IDM)": {"08": 21, "11": 10, "12": 1}, "Windows Command Processor": {"08": 17, "15": 12}, "OpenJDK Platform binary": {"09": 2139, "19": 9, "20": 3}, "Discord": {"09": 23, "10": 44, "11": 446, "12": 20, "13": 216, "15": 10, "16": 309, "17": 361, "18": 404, "19": 171, "20": 582, "21": 133}, "qBittorrent - A Bittorrent Client": {"11": 54, "15": 3, "19": 1}, "Growtopia.exe": {"11": 435}, "Notepad": {"11": 56, "12": 1, "15": 29}, "GrowtopiaInstaller.exe": {"11": 37}, "Microsoft Visual C++ 2015 Redistributable (x64) - 14.0.23026": {"11": 3}, "Desktop Window Manager": {"11": 4}, "WinRAR archiver": {"11": 6}, "8BitDo Ultimate Software": {"11": 154, "12": 15}, "Application Frame Host": {"12": 41, "15": 21, "17": 3}, "Microsoft Management Console": {"12": 9}, "Settings": {"12": 2}, "Ship of Harkinian - Spock Alfa": {"12": 545, "15": 64, "18": 766}, "Playnite Desktop Application": {"12": 53, "15": 38, "19": 10, "20": 71}, "Snes9X": {"12": 153}, "zelda3.exe": {"12": 455}, "Easy Anti-Cheat Bootstrapper (EOS)": {"12": 1, "21": 2}, "BrawlhallaGame.exe": {"12": 621, "21": 2347}, "Microsoft Visual C++ 2017 Redistributable (x86) - 14.10.25008": {"13": 1}, "Task Manager": {"13": 7}, "CrossCode": {"13": 671, "14": 3596, "15": 620, "20": 577}, "FINAL FANTASY.exe": {"15": 53}, "Dolphin.exe": {"15": 388}, "VLC media player": {"15": 22}, "Snipping Tool": {"16": 46, "17": 17}, "Pick an app": {"17": 3}, "Electron": {"17": 3}, "Java(TM) Platform SE binary": {"19": 1786, "20": 1140}, "Setup/Uninstall": {"20": 3}, "Roblox": {"20": 51}, "Roblox Game Client": {"20": 705, "21": 898}}}, {"2023-07-16": {"Windows Explorer": {"06": 858, "07": 1440, "08": 17, "09": 44, "10": 30, "11": 140, "15": 30, "16": 15, "17": 10, "18": 7, "22": 418, "23": 1228}, "Notepad": {"06": 4, "10": 22, "22": 856, "23": 2370}, "Spotify": {"06": 5, "07": 28, "08": 9, "09": 25, "10": 22, "15": 4, "16": 3}, "Application Frame Host": {"07": 72, "10": 1, "11": 438, "22": 43}, "Rainlendar2": {"07": 97, "18": 2}, "Google Chrome": {"07": 1146, "08": 515, "09": 636, "10": 1515, "11": 833, "15": 589, "16": 430, "17": 88, "18": 590, "22": 764}, "WinRAR archiver": {"07": 84, "22": 7}, "OpenJDK Platform binary": {"07": 51}, "Java(TM) Platform SE binary": {"07": 14}, "Search application": {"07": 9, "08": 3, "10": 1, "11": 22, "22": 13}, "8BitDo Ultimate Software": {"07": 211, "08": 107, "11": 75}, "Ship of Harkinian - Spock Alfa": {"07": 435, "08": 78, "22": 368}, "Discord": {"08": 87, "09": 11, "10": 527, "15": 426, "16": 456, "17": 169, "18": 341, "22": 966}, "Steam Client WebHelper": {"08": 1, "15": 1, "16": 37}, "Windows Shell Experience Host": {"08": 1, "10": 2, "22": 2}, "BrawlhallaGame.exe": {"08": 2773, "09": 2473, "15": 691}, "Python": {"09": 2, "15": 1, "22": 9}, "Visual Studio Code": {"09": 402, "10": 1463, "11": 9, "15": 774, "16": 430, "17": 30, "18": 2}, "Snipping Tool": {"10": 10}, "Hard Disk Sentinel": {"11": 1753}, "Microsoft Management Console": {"11": 26}, "Modern Setup Host": {"11": 296}, "Settings": {"11": 1}, "Easy Anti-Cheat Bootstrapper (EOS)": {"15": 3}, "Terraria": {"16": 2224, "17": 2487, "18": 1754}, "LockApp.exe": {"17": 290, "18": 297, "22": 1}, "File Picker UI Host": {"22": 11}, "StartMenuExperienceHost.exe": {"22": 1}, "Mouse Recorder": {"22": 47}}}, {"2023-07-17": {"Notepad": {"00": 1322, "05": 5, "14": 1}, "Windows Explorer": {"00": 2275, "01": 227, "05": 21, "06": 27, "07": 24, "08": 114, "09": 106, "10": 63, "12": 93, "13": 137, "14": 188, "15": 77, "16": 52, "17": 76, "18": 35, "19": 15, "20": 123}, "LockApp.exe": {"01": 0, "05": 3, "06": 609, "07": 305, "08": 308, "09": 2, "10": 295, "12": 410, "13": 152, "16": 570, "18": 293, "19": 1}, "Python": {"05": 16, "08": 4, "13": 4, "14": 16, "16": 3, "18": 2, "20": 3}, "Visual Studio Code": {"05": 69, "06": 404, "07": 1166, "08": 843, "09": 1224, "10": 174, "12": 137, "13": 3, "14": 0, "15": 1517, "16": 203, "17": 895, "18": 774, "19": 5}, "Google Chrome": {"05": 348, "06": 530, "07": 837, "08": 1858, "09": 2114, "10": 456, "12": 1405, "13": 1863, "14": 2104, "15": 1968, "16": 1824, "17": 1736, "18": 1526, "19": 149}, "Mouse Recorder": {"05": 1, "06": 44, "07": 3}, "Discord": {"07": 80, "08": 15, "12": 101, "13": 29, "14": 29, "16": 79, "17": 156, "18": 51, "19": 13}, "Search application": {"07": 3, "12": 17, "13": 15, "15": 1}, "Microsoft Management Console": {"07": 17}, "Application Frame Host": {"07": 8, "08": 41, "13": 34, "14": 30, "18": 13}, "Spotify": {"08": 103, "09": 106, "14": 179, "15": 6, "16": 173, "17": 9, "18": 2, "19": 55, "20": 61}, "Windows Shell Experience Host": {"08": 3, "09": 1, "12": 32, "14": 1, "16": 272, "17": 1, "18": 2, "19": 1}, "VLC media player": {"08": 133, "15": 24}, "retroarch.exe": {"12": 236}, "TreeSize Free hard disk space manager": {"12": 81}, "qBittorrent - A Bittorrent Client": {"12": 42, "16": 38}, "WinRAR archiver": {"13": 7}, "sm64pcBuilder2": {"13": 155, "14": 148}, "Terminal": {"13": 166, "14": 178}, "msys2-x86_64-20230526.exe": {"13": 19}, "Playnite Desktop Application": {"13": 69}, "Snes9X": {"13": 755}, "Settings": {"13": 1, "14": 1}, "8BitDo Ultimate Software": {"13": 154, "14": 209}, "sm64.us.f3dex2e.exe": {"14": 275, "17": 714, "18": 328}, "Steam Client WebHelper": {"14": 228, "19": 8}, "Ship of Harkinian - Spock Alfa": {"17": 3, "18": 138}, "CrossCode": {"19": 2290, "20": 3409}}}, {"2023-07-18": {"Python": {"06": 5, "07": 5, "08": 7, "09": 8, "10": 2, "11": 4, "12": 2, "14": 3, "17": 3, "18": 3}, "Windows Explorer": {"06": 69, "07": 40, "08": 58, "09": 81, "10": 104, "11": 61, "12": 4, "13": 15, "14": 38, "15": 47, "16": 9, "17": 43, "18": 34, "19": 42, "20": 26, "21": 9}, "Google Chrome": {"06": 1526, "07": 556, "08": 1258, "09": 1579, "10": 1189, "11": 1265, "12": 2679, "13": 3092, "14": 2821, "15": 1215, "16": 28, "17": 621, "18": 2156, "19": 98, "20": 128}, "Windows Shell Experience Host": {"06": 8, "11": 1, "15": 1, "18": 6, "20": 5}, "sm64.us.f3dex2e.exe": {"06": 1425, "10": 575, "11": 1120}, "LockApp.exe": {"06": 78, "07": 299, "12": 288, "17": 292, "18": 286, "19": 1}, "Spotify": {"06": 109, "07": 4, "08": 29, "09": 2, "11": 14, "12": 21, "15": 53, "17": 6, "20": 18}, "Visual Studio Code": {"06": 232, "07": 541, "08": 652, "09": 1913, "10": 15, "11": 1006, "15": 110, "17": 1956, "18": 962}, "Notepad": {"06": 4, "09": 9, "10": 2, "15": 3, "17": 1, "18": 5, "19": 4, "21": 93}, "qBittorrent - A Bittorrent Client": {"07": 9, "08": 11, "10": 3}, "Discord": {"07": 3, "11": 17, "14": 28, "15": 24, "16": 30, "17": 36, "18": 33, "19": 122, "20": 67, "21": 321}, "WinRAR archiver": {"07": 3, "10": 4, "14": 13}, "Snes9X": {"07": 1026, "08": 1120, "10": 1633}, "Playnite Desktop Application": {"08": 329}, "VLC media player": {"08": 130, "11": 3}, "Application Frame Host": {"09": 2, "10": 11}, "Ship of Harkinian - Spock Alfa": {"10": 44}, "7-Zip GUI": {"10": 12}, "Search application": {"11": 7, "13": 2, "20": 6}, "TreeSize Free hard disk space manager": {"11": 69}, "Rainlendar2": {"11": 2}, "Rainmeter desktop customization tool": {"11": 22}, "Microsoft Edge": {"13": 474}, "OpenJDK Platform binary": {"13": 5, "14": 634, "15": 2027, "19": 8, "20": 1}, "Steam Client WebHelper": {"15": 2, "20": 2}, "Terraria": {"15": 104, "16": 3528, "17": 462}, "Pick an app": {"18": 2}, "Java(TM) Platform SE binary": {"19": 2307, "20": 3064}, "CrossCode": {"20": 273, "21": 3174}}}, {"2023-07-19": {"Python": {"06": 42, "07": 6, "10": 9, "11": 30, "13": 42, "15": 2, "16": 2, "18": 2, "20": 160}, "Steam Client WebHelper": {"06": 14, "11": 1, "13": 66, "15": 2, "20": 2}, "Desktop Window Manager": {"06": 1}, "Rainlendar2": {"06": 82}, "Discord": {"06": 181, "10": 12, "11": 669, "12": 44, "13": 67, "14": 561, "15": 40, "16": 41, "17": 127, "18": 986, "19": 360, "20": 516, "21": 61}, "Spotify": {"06": 18, "10": 10, "11": 14, "12": 11, "13": 130, "18": 18}, "Windows Explorer": {"06": 111, "07": 59, "08": 5, "10": 25, "11": 53, "12": 10, "13": 188, "14": 11, "15": 10, "16": 44, "17": 43, "18": 165, "19": 9, "20": 27, "22": 2}, "Rainmeter desktop customization tool": {"06": 5}, "Google Chrome": {"06": 2138, "07": 2409, "08": 1790, "10": 792, "11": 1476, "12": 133, "13": 570, "14": 289, "15": 215, "16": 790, "17": 1625, "18": 1343, "19": 224, "20": 1149}, "Windows Shell Experience Host": {"06": 6, "10": 62, "11": 1, "13": 9, "17": 64, "18": 9, "20": 1}, "Application Frame Host": {"06": 11, "13": 121, "14": 7, "16": 10, "18": 21, "19": 93}, "Snes9X": {"06": 657, "07": 1122, "10": 1246}, "LockApp.exe": {"08": 506, "12": 632, "13": 117, "16": 96, "17": 415, "18": 441, "19": 977}, "Visual Studio Code": {"10": 26, "11": 171, "16": 1410, "17": 1269, "18": 90}, "Snipping Tool": {"10": 2, "16": 9}, "WinRAR archiver": {"11": 29}, "Easy Anti-Cheat Bootstrapper (EOS)": {"11": 5, "13": 2}, "BrawlhallaGame.exe": {"11": 1136, "12": 2246, "13": 1376, "14": 2706}, "Settings": {"13": 7}, "Search application": {"13": 19, "16": 3, "18": 4, "19": 22}, "ViGEm Bus Driver Installer": {"13": 13}, "Microsoft Management Console": {"13": 27}, "Hard Disk Sentinel": {"13": 2}, "OpenJDK Platform binary": {"14": 8, "15": 261}, "Java(TM) Platform SE binary": {"15": 2763}, "BloonsTD6.exe": {"15": 277, "16": 1176}, "VLC media player": {"17": 41, "18": 67}, "Notepad": {"18": 2, "19": 38}, "sm64.us.f3dex2e.exe": {"18": 433, "19": 1862}, "StartMenuExperienceHost.exe": {"19": 1}, "CrossCode": {"20": 1713, "21": 3533, "22": 1719}, "Task Manager": {"20": 19}}}, {"2023-07-20": {"Steam Client WebHelper": {"06": 14, "10": 1, "12": 3, "17": 2}, "Python": {"06": 33, "07": 2, "08": 2, "09": 58, "10": 6, "19": 1, "21": 1}, "Discord": {"06": 6, "07": 3, "08": 27, "09": 14, "17": 33, "18": 6, "19": 74, "21": 196}, "Hard Disk Sentinel": {"06": 20, "17": 4}, "Windows Explorer": {"06": 235, "07": 143, "08": 39, "09": 61, "10": 41, "12": 15, "17": 16, "18": 52, "19": 16, "21": 77}, "Google Chrome": {"06": 988, "07": 3267, "08": 2301, "09": 2584, "10": 1427, "17": 529, "18": 1664, "21": 1624}, "Spotify": {"06": 93, "07": 16, "08": 259, "10": 20, "17": 10, "18": 120, "21": 76}, "VLC media player": {"06": 4, "19": 2084, "20": 3596, "21": 1282}, "Visual Studio Code": {"06": 127, "08": 939, "09": 775, "10": 60}, "Windows Shell Experience Host": {"06": 12, "07": 9, "08": 5, "09": 2, "21": 1}, "Snipping Tool": {"06": 3, "09": 15, "21": 19}, "Search application": {"06": 7, "07": 12, "18": 1}, "Mouse Recorder": {"06": 61}, "Notepad": {"06": 68, "07": 61, "09": 40, "10": 1, "18": 34, "21": 4}, "Application Frame Host": {"06": 4, "08": 19, "09": 14, "18": 1, "19": 3, "21": 10}, "qBittorrent - A Bittorrent Client": {"06": 2}, "Rainlendar2": {"07": 2}, "Windows host process (Rundll32)": {"07": 50}, "MEGAsync": {"07": 26}, "Task Manager": {"09": 26}, "Rainmeter desktop customization tool": {"10": 74, "18": 10}, "LockApp.exe": {"10": 575, "12": 521, "13": 104, "17": 1, "19": 287}, "CrossCode": {"10": 246, "11": 3594, "12": 1671, "17": 1444, "18": 119}, "StartMenuExperienceHost.exe": {"12": 1}, "Windows Wordpad Application": {"18": 1}, "Snes9X": {"18": 1584}, "WinRAR archiver": {"21": 3}}}, {"2023-07-21": {"Python": {"06": 8, "09": 1, "13": 2, "19": 19, "20": 10, "21": 6, "22": 3}, "Steam Client WebHelper": {"06": 16, "09": 1, "11": 5, "13": 4, "21": 3}, "Discord": {"06": 56, "09": 17, "13": 69, "14": 14, "18": 62, "19": 869, "20": 773, "21": 711, "22": 184}, "Hard Disk Sentinel": {"06": 1, "13": 16}, "Windows Explorer": {"06": 61, "07": 15, "08": 32, "09": 14, "10": 6, "11": 14, "12": 2, "13": 47, "14": 16, "18": 4, "19": 71, "20": 148, "21": 90, "22": 10}, "Windows Shell Experience Host": {"06": 4, "07": 4, "13": 2, "21": 1}, "Google Chrome": {"06": 3003, "07": 3026, "08": 1511, "09": 1285, "13": 120, "18": 197, "19": 28, "20": 1447, "21": 662, "22": 95}, "Search application": {"06": 11, "14": 4, "19": 7, "20": 2}, "Notepad": {"06": 5, "20": 164}, "Windows Wordpad Application": {"06": 12}, "qBittorrent - A Bittorrent Client": {"06": 10, "13": 1, "21": 9}, "Snes9X": {"07": 548, "08": 253}, "Spotify": {"08": 5, "13": 39, "18": 4, "19": 31, "20": 6, "21": 20, "22": 42}, "sm64.us.f3dex2e.exe": {"08": 1783}, "Playnite Desktop Application": {"08": 7}, "LockApp.exe": {"09": 108, "10": 289, "11": 1, "12": 292, "13": 288, "18": 219, "19": 1}, "CrossCode": {"09": 2167, "10": 2849, "11": 3143, "12": 1078, "13": 1439, "14": 685}, "Adobe Photoshop CC 2019": {"14": 120}, "OpenJDK Platform binary": {"18": 2559, "19": 8}, "Application Frame Host": {"19": 10, "20": 75}, "Task Manager": {"19": 16}, "COM Surrogate": {"19": 27}, "PyxelEdit.exe": {"19": 958, "20": 926}, "Easy Anti-Cheat Bootstrapper (EOS)": {"19": 3}, "BrawlhallaGame.exe": {"19": 654, "21": 661, "22": 205}, "FileConverter": {"20": 2}, "Visual Studio Code": {"20": 30, "21": 94}, "Pick an app": {"20": 3}, "Snipping Tool": {"20": 1}, "Rainmeter desktop customization tool": {"20": 3}, "Terraria": {"21": 1038}}}, {"2023-07-22": {"Python": {"06": 23, "07": 1, "10": 17, "11": 8}, "Steam Client WebHelper": {"06": 14, "13": 1, "15": 1, "20": 2}, "Rainlendar2": {"06": 95}, "Discord": {"06": 70, "07": 4, "10": 10, "13": 2006, "14": 149, "15": 30, "16": 196, "17": 29, "18": 56, "19": 93, "20": 419, "21": 123}, "Hard Disk Sentinel": {"06": 4}, "Windows Explorer": {"06": 427, "07": 23, "08": 3, "09": 18, "10": 124, "11": 53, "12": 325, "13": 741, "14": 25, "15": 49, "16": 14, "17": 1, "18": 472, "19": 17, "20": 45, "21": 136}, "qBittorrent - A Bittorrent Client": {"06": 2}, "Google Chrome": {"06": 1705, "07": 1632, "08": 693, "09": 2758, "10": 873, "11": 2175, "12": 1562, "13": 59, "14": 114, "15": 420, "16": 84, "18": 1915, "19": 1007, "20": 786}, "Spotify": {"06": 30, "07": 170, "10": 63, "14": 58, "15": 57, "18": 12, "19": 58, "20": 11, "21": 18}, "sm64.us.f3dex2e.exe": {"06": 965, "09": 270, "10": 1177}, "Windows Shell Experience Host": {"06": 35, "07": 8, "09": 2, "11": 7, "18": 10, "20": 1}, "Task Manager": {"06": 30, "10": 14, "11": 27, "18": 55, "20": 31}, "Easy Anti-Cheat Bootstrapper (EOS)": {"06": 3, "13": 11, "14": 17, "15": 6}, "BrawlhallaGame.exe": {"06": 71, "07": 1441, "14": 3202, "15": 2102}, "OpenJDK Platform binary": {"07": 291, "08": 2306, "15": 716, "16": 2962}, "LockApp.exe": {"08": 379, "09": 2, "13": 2, "18": 141}, "Snes9X": {"09": 228, "12": 1683}, "Visual Studio Code": {"10": 322, "11": 49, "18": 398}, "Notepad": {"11": 1, "14": 8, "15": 182, "18": 1}, "Snipping Tool": {"11": 5, "19": 3, "20": 5}, "Application Frame Host": {"12": 21, "14": 9, "16": 13}, "Playnite Desktop Application": {"12": 2, "13": 13}, "Search application": {"14": 2, "16": 5, "18": 4}, "Desktop Window Manager": {"15": 1}, "PyxelEdit.exe": {"16": 33, "20": 9}, "Roblox Game Client": {"16": 268, "17": 3550, "19": 2407, "20": 2044}, "Roblox": {"16": 7, "20": 6}, "activewindow.exe": {"18": 8}, "OBS Studio": {"18": 13}, "VLC media player": {"18": 38}, "activewindow - Copy.exe": {"18": 1}, "CrossCode": {"20": 227, "21": 2478}}}, {"2023-07-23": {"Google Chrome": {"06": 2233, "07": 632, "08": 537, "12": 362, "13": 2254, "14": 653, "16": 21, "17": 1260, "18": 128}, "Task Manager": {"06": 13, "13": 6, "14": 43, "18": 35}, "Windows Explorer": {"06": 31, "08": 6, "12": 10, "13": 193, "14": 761, "15": 7, "16": 40, "17": 446, "18": 173}, "Application Frame Host": {"06": 4}, "LockApp.exe": {"07": 0, "08": 304, "12": 298, "13": 111, "17": 288}, "Windows Shell Experience Host": {"08": 3, "12": 1, "14": 3, "17": 21}, "Spotify": {"08": 326, "13": 23, "14": 2, "16": 235, "17": 90, "18": 8}, "Discord": {"08": 17, "12": 318, "13": 111, "14": 629, "15": 227, "16": 340, "17": 415, "18": 119}, "Search application": {"13": 3, "17": 2}, "OpenJDK Platform binary": {"13": 16}, "Steam Client WebHelper": {"13": 2, "14": 2, "16": 1}, "Terraria": {"13": 700, "14": 624, "15": 3355, "16": 2864, "17": 5}, "Rainmeter desktop customization tool": {"13": 2}, "7-Zip GUI": {"13": 61, "14": 36}, "WinRAR archiver": {"13": 18, "14": 67, "18": 6}, "Visual Studio Code": {"13": 87, "14": 461, "17": 448, "18": 8}, "Notepad": {"14": 1, "17": 5, "18": 1}, "Setup/Uninstall": {"14": 31}, "Inno Setup Compiler": {"14": 273}, "sm64.us.f3dex2e.exe": {"16": 88}, "OBS Studio": {"17": 45}, "VLC media player": {"17": 228}}}]

const stackedChart = document.getElementById("stackedChart").getContext('2d');
const pieChart = document.getElementById('pieChart')
const appList = document.querySelector(".applist")
const datepicker = document.getElementById('datepicker')
const screenTime = document.getElementById('screenTime')
const selectedDate = document.querySelectorAll('.selectedDate')
const mostUsedApp = document.getElementById('mostUsedApp')
const errorReport = document.getElementById('errorReport')

// HH:MM:SS on stacked, and maybe also pieChart

const times = ['0:00', '1:00', '2:00', '3:00', '4:00', '5:00', '6:00', '7:00', '8:00', '9:00', '10:00', '11:00', '12:00', '13:00', '14:00', '15:00', '16:00', '17:00', '18:00', '19:00', '20:00', '21:00', '22:00', '23:00']
const numbers = ['00', '01', '02', '03', '04', '05', '06', '07', '08', '09', '10', '11', '12', '13', '14', '15', '16', '17', '18', '19', '20', '21', '22', '23']


function datepicker_load() {
	// Finds the first & last dates
  let first_date = ""
  let last_date = ""
	let i = 0
	for (index in json) {
		for (key in json[index]) {
			if (i == 0) {
				first_date = key
				i++
			}
			last_date = key
		}
	}

	// Set the min and max date attributes in the datepicker
	datepicker.setAttribute('min', first_date)
	datepicker.setAttribute('max', last_date)

  // return last date, used for other parts of the site
  return last_date
}

function totalPerHour(date, min_app_time, backgroundColors) {
  // Find the list index for the date
  let index = 0
  for (let i = 0; i < json.length; i++) {
    if (json[i][date]) {
      index = i
      break
    }
  }

  // Calculate the total seconds per hour
  let appHour = 0
  let totalApp = []
  let allApps = []
  for (const key in json[index][date]) {
    totalApp = []
    for (let i = 0; i < 24; i++) {
      appHour = json[index][date][key][numbers[i]]
      totalApp.push(appHour)
    }
    if (appMinTime(totalApp, min_app_time)) {
      if (backgroundColors) {
        allApps.push({'label': key, 'data': totalApp, 'backgroundColor': labelToColor(key, backgroundColors)})
      } else {
        allApps.push({'label': key, 'data': totalApp})
      }
    }
  }
  console.log(allApps)
  return allApps
}

function secondsToTime(value) {
  minutes = Math.floor(value / 60)
  seconds = value - (minutes * 60)
  return (`${minutes.toString().padStart(2, '0')}:${String(seconds).toString().padStart(2, '0')}`)
}

function secondsToPie(value) {
  return new Date(value * 1000).toISOString().slice(11, 19)
}

function appMinTime(total, min_time) {
  // Only shows app that were on-screen for > 60s 
  for (let i = 0; i < 24; i++) {
    if (total[i] > min_time) {
      return true
    }
  }
  return false
}

function colorFromPie(pieData) {
  let backgroundColors = []
  for (let i = 0; i < pieData.labels.length; i++) {
    backgroundColors.push({'label': pieData['labels'][i], 'backgroundColor': pieData['datasets'][0]['backgroundColor'][i]})
  }
  return backgroundColors
}

function labelToColor(name, backgroundColors) {
  for (i in backgroundColors) {
    current = backgroundColors[i]
    if (current.label == name) {
      return current.backgroundColor
    }
  }
}

function totalByApp(allApps) {
  let totalByApps = []
  let appName = ""
  for (i in allApps) {
    let totalApp = 0
    appName = allApps[i]['label']
    for (hour in allApps[i]['data']) {
      let current = allApps[i]['data'][hour]
      if (current) {
        totalApp += current
      }
    }
    totalByApps.push({'appName': appName, 'totalApp' : totalApp})
  }

  // Sort the array from greatest to least
  return totalByApps
}

function sortByTotalApp(total) {
	total.sort(function(a, b){return b.totalApp - a.totalApp})
  return total
}

function screenTimeFromAppsTotal(array) {
  total = 0
  for (i = 0; i < array.length; i++) {
    total += array[i]['totalApp']
  }
  return total
}

function appsToList(appsTotal) {
  // Clear the list
  appList.innerHTML = ""

  // Add the apps to html list
  for (i in appsTotal) {
    appList.innerHTML += `
    <li>
      <span class="appname">${appsTotal[i]['appName']}</span>
      <span class="apptime">${new Date(appsTotal[i]['totalApp'] * 1000).toISOString().slice(11, 19)}</span>
    </li>
    `
  } 
}

function getPieData(appsTotal) {
  for (let i = 0; i < appsTotal.length; i++) {
    pieLabels.push(appsTotal[i]['appName'])
    pieDatasets.push(appsTotal[i]['totalApp'])
  }
}

function updateHtml(date, appsTotal) {
  // Update screen-on-time
  if (appsTotal) {
    screenTime.textContent = new Date(screenTimeFromAppsTotal(appsTotal) * 1000).toISOString().slice(11,19)
    // Update most used app
    mostUsedApp.textContent = `${appsTotal[0]['appName']} (${new Date(appsTotal[0]['totalApp'] * 1000).toISOString().slice(11,19)})`
  } else {
    screenTime.textContent = '00:00:00'
    mostUsedApp.textContent = 'none'
  }

  // Update calendar selected date
  datepicker.value = date

  // Change all the indicators for selected date on html
  selectedDate.forEach(function(element) {
    element.textContent = date
  })
}






// Main
// Initialize datepicker, which returns the latest date —which becomes SELECTED_DATE— from the JSON.
let SELECTED_DATE = datepicker_load()

// Get data for appList (and piechart)
let appsTotal = sortByTotalApp(totalByApp(totalPerHour(SELECTED_DATE, 0)))
// Append to appList
appsToList(appsTotal)

// Data for pie chart (data for stacked chart has to be taken after the pie chart, to steal colors from pie chart)
let pieLabels = []
let pieDatasets = []
getPieData(appsTotal)

// Update all of the HTML that requires updating
updateHtml(SELECTED_DATE, appsTotal)





// Chartjs config
// Pie Chart
console.log(pieLabels, pieDatasets)
let pieData = {
  labels: pieLabels,
  datasets: [{
    label: "Time",
    data: pieDatasets
  }]
}
const pieConfig = {
  type: 'doughnut',
  data: pieData,
  options: {
    responsive: true,
    plugins: {
      tooltip: {
        callbacks: {
          label: function(context) {
            const value = context.parsed
            console.log(value)
            return `${context.dataset.label}: ${secondsToPie(value)}`
          }
        }
      },
      legend: {
        display: false,
      }
    }
  }
}

let chartjs_pie = new Chart(pieChart, pieConfig);
let backgroundColors = colorFromPie(chartjs_pie.data)



// Stacked Bar Chart, takes the colors for each app from the pieChart, so we have to initialize after the pie chart.
let stackedData = {
    labels: times,
    datasets: totalPerHour(SELECTED_DATE, 60, backgroundColors)
}
const stackedConfig = {
  type:'bar',
  data: stackedData,
  options: {
    responsive: true,
    scales: {
      x: {
        stacked: true,
        grid: {
          color: 'rgba(255, 255, 255, 0.1)'
        },
        ticks: {
          color: 'white'
        }
      },
      y: {
        type: 'linear',
        ticks: {
          callback: function(value) {
            return secondsToTime(value)
          },
          stepSize: 600,
          color: 'white'
        },
        max: 3600,
        stacked: true,
        grid: {
          color: 'rgba(255, 255, 255, 0.15)'
        },
      }
    },
    plugins: {
      tooltip: {
        callbacks: {
          label: function(context) {
            const value = context.parsed.y
            return `${context.dataset.label}: ${secondsToTime(value)}`
          }
        }
      },
      colorschemes: {
        scheme: 'brewer.Paired12' // You can change the color scheme as needed
      },
      legend: {
        labels: {
          color: 'white'
        }
      }
    }
  }
}
let chartjs_stacked = new Chart(stackedChart, stackedConfig)
console.log(chartjs_stacked)




function changeDate(dateFromArrows) {
  let date = ""
  if (dateFromArrows) {
    date = dateFromArrows
  } else {
    date = datepicker.value
  }
  // Makes sure the date is selected
  if (date) {
    try {
      // Update the SELECTED_DATE
      SELECTED_DATE = date

      // Update appsTotal to the new date
      appsTotal = sortByTotalApp(totalByApp(totalPerHour(SELECTED_DATE, 0)))

      // Replace the appList
      appsToList(appsTotal)

      // Data for pie chart
      pieLabels = []
      pieDatasets = []
      getPieData(appsTotal)

      // Update PieChart Data
      chartjs_pie.data = {labels: pieLabels, datasets: [{label:"Time (mins)", data: pieDatasets}]}

      // Update the charts
      chartjs_pie.update()

      // Get data for and update StackedChart
      backgroundColors = colorFromPie(chartjs_pie.data)
      chartjs_stacked.data.datasets = totalPerHour(SELECTED_DATE, 60, backgroundColors)

      chartjs_stacked.update()
      // Update the HTML information, current dates, screen-on-time
      updateHtml(SELECTED_DATE, appsTotal)
      // No errors.
      errorReport.innerHTML = ""
    }
    catch(err) {
      console.log(err)
      // If data for the date doesn't exist.
      errorReport.innerHTML = "No information available for that date."      
      SELECTED_DATE = date
      // appsTotal will have everything be undefined by this point, so screenontime = 0
      updateHtml(SELECTED_DATE)

      chartjs_pie.data = null
      // I have to keep the labels (0:00-23:00) on data, and to prevent an error logged to console, I will put data with label 'nothing'
      chartjs_stacked.data.datasets = [{label: 'nothing', data: []}]

      chartjs_pie.update()
      chartjs_stacked.update()
    }
  } else {
    // If no date is selected
    errorReport.innerHTML = "Please select a date."
  }
}

function arrows(direction) {
  let date = new Date(SELECTED_DATE)

  if (direction == 1) {
    date.setDate(date.getDate() + 1)
  } else if (direction == -1) {
    date.setDate(date.getDate() - 1)
  }
  
  let new_date = (date.toISOString().slice(0, 10))
  changeDate(new_date)
}